function setupAutoScroll(){0==$("div.alert-box").size()&&"small"!=getWindowsSize()&&setTimeout(function(){$(window).scrollTop()+$(window).height()<=parseInt($("#welcome").css("height"))+100&&("undefined"==typeof coinAnimationStarted||0==coinAnimationStarted)&&autoScrollToWelcome()},4e3)}function autoScrollToWelcome(){0==autoscrolled&&$(window).scrollTop()<=parseInt($("#welcome").css("height"))&&(autoscrolled=!0,moveTo("#what",3e3),analytics.track("AutoScrolled to Welcome section"))}function loadCoinAnimation(){"small"!=getWindowsSize()&&$("#canvas-container").load("/animation",function(){startCoinAnimation()})}function checkCoinAnimationCancel(){(autoscrolled||$(window).scrollTop()>=parseInt($("#welcome").css("height")))&&"undefined"!=typeof coinAnimationStarted&&coinAnimationStarted&&finishCoinAnimation()}function onYouTubeIframeAPIReady(){player=new YT.Player("youtube-video");try{player.addEventListener("onStateChange","onPlayerStateChange"),player.addEventListener("onError","onPlayerError")}catch(err){setTimeout(onYouTubeIframeAPIReady,1e3)}}function onPlayerStateChange(event){event.data==YT.PlayerState.PLAYING&&setTimeout(autoScrollOnVideoFinish,1e3)}function autoScrollOnVideoFinish(){null!=player&&(player.getDuration()-player.getCurrentTime()<=3.5||player.getPlayerState()==YT.PlayerState.ENDED?(player=null,moveTo("#start",3e3),analytics.track("Watched video WhatIsBitcoin")):setTimeout(autoScrollOnVideoFinish,300))}function onPlayerError(){moveTo("#start",2e3)}function updateDemoContent(){setupTouchLayouts(),updateToolTips()}function moveOutDemoTransactionSection(){$(document).ready(function(){1==$("#transactionDemo").children().size()&&$("#transactionDemoPlaceholder").append($("#transference-demo"))})}function moveInDemoTransactionSection(){$(document).ready(function(){1==$("#transactionDemoPlaceholder").children().size()&&$("#transactionDemo").append($("#transference-demo"))})}function loadDemoContent(){($("#demo-content").hasClass("empty-content")||$("#demo-content").hasClass("normal-content"))&&"small"==getWindowsSize()?($("#demo-content").addClass("small-content").removeClass("empty-content").removeClass("normal-content"),moveOutDemoTransactionSection(),$("#demo-content").load("/demo-small",function(){updateDemoContent()})):($("#demo-content").hasClass("empty-content")||$("#demo-content").hasClass("small-content"))&&"small"!=getWindowsSize()&&($("#demo-content").addClass("normal-content").removeClass("empty-content").removeClass("small-content"),$("#demo-content").load("/demo",function(){moveInDemoTransactionSection(),updateDemoContent(),registerDemoParsleyEvents()}))}function showDemoTransaction(){$("#transference-demo").hasClass("available")&&$("#transference-demo").isBottomScrolledIntoView()&&!$("#transference-demo").hasClass("enabled")&&($("#transference-demo").addClass("enabled"),setTimeout(function(){$("#demo-shopping-cart-info").fadeIn(2e3,function(){setTimeout(function(){$("#demo-shopping-cart-content").fadeIn("slow",function(){$("#demo-wallet-send-info").fadeIn(2e3,function(){setTimeout(function(){$("#demo-wallet-send-content").fadeIn("slow"),demo_input_amount_glowing=!0,demo_input_address_glowing=!0,startDemoFieldsGlowing()},1500)})})},1500)})},500))}function showBottomElements(){show_bottom_elements&&$("#transference-demo").isBottomScrolledIntoView()&&setTimeout(function(){$("#get-bitcoins-section").fadeIn("slow"),$("#use").fadeIn("slow"),$("#myths").fadeIn("slow")},500)}function startDemoFieldsGlowing(){demo_input_amount_glowing||demo_input_address_glowing||demo_copy_address_button_glowing?(demo_input_amount_glowing&&(demo_input_amount_glowing_on=!demo_input_amount_glowing_on,demo_input_amount_glowing_on&&!$("#demo-input-amount").parsley().isValid()?$("#demo-input-amount").css("box-shadow","0px 0px 30px #FF5E5E"):$("#demo-input-amount").css("box-shadow","0px 0px 0px #FFF")),demo_input_address_glowing&&(demo_input_address_glowing_on=!demo_input_address_glowing_on,demo_input_address_glowing_on&&!$("#demo-pay-to-address-input").parsley().isValid()?$("#demo-pay-to-address-input").css("box-shadow","0px 0px 30px #FF5E5E"):$("#demo-pay-to-address-input").css("box-shadow","0px 0px 0px #FFF")),demo_copy_address_button_glowing&&(demo_copy_address_button_glowing_on=!demo_copy_address_button_glowing_on,demo_copy_address_button_glowing_on?$("#copy-demo-button").css("box-shadow","0px 0px 50px #EA0000"):$("#copy-demo-button").css("box-shadow","0px 0px 0px #FFF")),setTimeout(function(){startDemoFieldsGlowing()},3e3)):($("#demo-input-amount").css("box-shadow","0px 0px 0px #FFF"),$("#demo-pay-to-address-input").css("box-shadow","0px 0px 0px #FFF"),$("#copy-demo-button").css("box-shadow","0px 0px 0px #FFF"))}function registerDemoParsleyEvents(){$("#demo-input-amount").parsley().subscribe("parsley:field:validate",function(){var current_value=$("#demo-input-amount").val();if(!$("#demo-input-amount").parsley().isValid()&&-1!=current_value.indexOf(",")){var res=current_value.replace(",",".");$("#demo-input-amount").val(res),$("#demo-input-amount").parsley().validate()}})}function enable_bottom_sections_after_demo(){$("#show-blockchain-section").fadeIn("slow"),show_bottom_elements=!0,$("#mining-content").load("/mining"),$("#mining-POW-content").load("/mining-POW")}function setupActiveJavaScript(){$("#welcome-content").css({position:"fixed",margin:"0 0 0 -37.5%"})}function getWindowsSize(){return $("#breakpoints div:visible").first().data("size")}function moveTo(id,speed){speed="undefined"==typeof speed?1e3:speed;var offset=20,target=$(id).offset().top-offset;$("html, body").animate({scrollTop:target},speed,"easeInOutCubic")}function setupNavigationMenu(){$("div.navigation-menu").on({mouseenter:function(){window["mouse-over-navigation-menu"]=!0,$("#navigation-menu-icon").slideUp(200),setTimeout(function(){window["mouse-over-navigation-menu"]&&$("div.navigation-menu").find("div.navigation-content").slideDown(200).removeClass("hidden")},200)},mouseleave:function(){window["mouse-over-navigation-menu"]=!1,setTimeout(function(){window["mouse-over-navigation-menu"]||($("div.navigation-menu").find("div.navigation-content").slideUp(200).addClass("hidden",400),setTimeout(function(){window["mouse-over-navigation-menu"]||$("#navigation-menu-icon").slideDown(200)},200))},200)}}),$('a[href^="#"]').click(function(event){var id=$(this).attr("href");moveTo(id),event.preventDefault()})}function setupScrollHintAnimation(){$(window).scrollTop()<=parseInt($("#welcome").css("height"))&&$("#scroll-arrow").animate({top:"+=40"},4e3,"easeInOutQuart")}function getScrolledItems(elem){var docViewTop=$(window).scrollTop(),docViewBottom=docViewTop+$(window).height(),elemTop=$(elem).offset().top,elemBottom=elemTop+$(elem).height();return[docViewTop,docViewBottom,elemTop,elemBottom]}function scrollFading(){if(scrollFadingBlocked)return null!=scrollFadingChecker&&(clearTimeout(scrollFadingChecker),scrollFadingChecker=null),void(scrollFadingChecker=setTimeout(200,scrollFading));scrollFadingBlocked=!0;var sizeWelcome=parseInt($("#welcome").css("height")),scrolled=1.5*$(window).scrollTop(),percentage=1-scrolled/sizeWelcome;0>=percentage?(percentage=0,$("#welcome-content").addClass("hidden"),$("#coin-canvas").css("opacity",0)):($("#welcome-content").removeClass("hidden"),$("#welcome-content").css("opacity",percentage),$("#coin-canvas").css("opacity",percentage),$("#welcome-content").find("div#scroll-message").css("opacity",percentage-scrolled/sizeWelcome),"large"==getWindowsSize()&&(.6>percentage?$("#welcome-content").find("h1").addClass("de_extruded").removeClass("extruded"):$("#welcome-content").find("h1").addClass("extruded").removeClass("de_extruded"),.83>percentage?$("#welcome-content").find("h2").addClass("de_extruded-subtitle").removeClass("extruded-subtitle"):$("#welcome-content").find("h2").addClass("extruded-subtitle").removeClass("de_extruded-subtitle")));var sizeWelcomeAndWhat=parseInt($("#welcome").css("height"))+parseInt($("#what").css("height"))/2,footsteps_opacity=scrolled/sizeWelcomeAndWhat;$("#footsteps-image").css("opacity",footsteps_opacity/2),checkCoinAnimationCancel(),showDemoTransaction(),showBottomElements(),scrollFadingBlocked=!1}function setupScrollFadingAndResize(){$("body,html").bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(e){(e.which>0||"mousedown"===e.type||"mousewheel"===e.type)&&$("html,body").stop()})}function updateSizes(){$(document).ready(function(){var video_width=($("#youtube-video-container").height(),$("#youtube-video-container").width()),space_side_video=($(window).width()-video_width)/2,ratio=space_side_video/178,youtube_aspect_ratio=.5625;if($("#youtube-video").width(parseInt(video_width)).height(parseInt(youtube_aspect_ratio*video_width)),$("#youtube-video-container").css("padding-bottom",$("#youtube-video").height()+10+"px"),$("#footsteps-image").width(parseInt(174*ratio)),$("#footsteps-image").height(parseInt(444*ratio)),$("#footsteps-image").css("top","-"+$("#youtube-video").height()/2+"px"),$("div#what").height(parseInt($(".video-container").find("iframe").height()+$("div#what").find("h1").height()+$("div#what").find("h3").height())+170),"medium"==getWindowsSize()){var element=$("div.right-border");element.removeClass("right-border"),element.addClass("bottom-border")}else if("large"==getWindowsSize()){var element=$("div.bottom-border");element.removeClass("bottom-border"),element.addClass("right-border")}"undefined"!=typeof coinAnimationStarted&&("small"==getWindowsSize()?finishCoinAnimation():coinAnimationFinished?finishCoinAnimation():positionCoinAnimationCanvas())})}function resizeWindow(){$(document).ready(function(){loadDemoContent(),updateSizes()})}function setupTouchLayouts(){Modernizr.touch&&$(".wallet-info").addClass("touch-wallet-border")}function detectLocation(){jQuery.getJSON("http://freegeoip.net/json/",function(location){user_location=location})}function loadLocalBitcoinSellers(){$("#bitcoin-sellers").children().remove();var cc=user_location.country_code,sellers_list=[],link_start='<a target="_blank" href="';("NL"==cc||"BE"==cc||"LU"==cc)&&(sellers_list.push('https://bitonic.nl/?refcode=8w0UlJ123111"> Bitonic </a>'),sellers_list.push('https://www.happycoins.com/Account/Index/eb754703-5a33-46fd-b0d2-9a2bb7e465e3"> HappyCoins </a>'),sellers_list.push('http://www.bitcoin-bon.nl"> Bitcoin Bon </a>')),("GB"==cc||"SE"==cc||"NL"==cc||"DE"==cc||"FR"==cc||"IT"==cc||"ES"==cc||"PL"==cc||"HU"==cc)&&sellers_list.push('http://safello.com/buy"> Safello </a>'),("GB"==cc||"SE"==cc||"NL"==cc||"DE"==cc||"FR"==cc||"IT"==cc||"ES"==cc||"PL"==cc||"HU"==cc||"PT"==cc||"LI"==cc||"LU"==cc||"BE"==cc||"AT"==cc)&&sellers_list.push('https://bittylicious.com/r/19542"> Bittylicious </a>'),"RU"==cc&&sellers_list.push('https://btc-e.com" target="_blank"> BTC-e </a>'),"US"==cc&&(sellers_list.push('https://coinbase.com/?r=52ac992c01478f0e730000b9&utm_campaign=user-referral&src=referral-link"> coinbase </a>'),sellers_list.push('http://www.expresscoin.com/"> expresscoin </a>'));for(var i=0;i<sellers_list.length;i++)i%4==0?$("#bitcoin-sellers").append("<br>"):i>0&&$("#bitcoin-sellers").append("-"),$("#bitcoin-sellers").append(link_start+sellers_list[i])}function updateToolTips(){$(document).ready(function(){$(".has-tooltip[title]").qtip({style:{classes:"tooltip-text qtip-youtube qtip-shadow qtip-rounded"},position:{my:"bottom center",at:"top center",target:this},hide:{fixed:!0,delay:200}}),$(".has-external-tooltip").each(function(){$(this).qtip({content:{text:$("#"+$(this).attr("tooltip-id"))},style:{classes:"tooltip-text qtip-youtube qtip-shadow qtip-rounded"},position:{my:"bottom center",at:"top center",target:this},hide:{fixed:!0,delay:200}})})})}var ltubApp=angular.module("ltubApp",[]);ltubApp.controller("DemoCtrl",["$scope",function($scope){$scope.showDemo=function(){$("#show-demo").fadeOut("slow",function(){$("div.sStart").height("100%"),$("#show-demo").replaceWith($("#demo-content").fadeIn("slow")),updateSizes(),moveTo("#demo-content"),$("#transference-demo").addClass("available"),analytics.track("Click Discover Bitcoin",{small:"small"==getWindowsSize()})})}}]),ltubApp.controller("TransactionCtrl",["$scope",function($scope){$scope.total_bitcoins=2,$scope.disabled=!1,$scope.transactionDemo=function(){$scope.disabled||($("#demo-transaction-form").parsley().validate()?($("#demo-transaction-send-button").addClass("disabled").qtip("destroy",!0),$("#demo-transaction-send-button").removeAttr("title"),$("#demo-pay-to-address-input").attr("disabled",""),$("#demo-input-amount").attr("disabled",""),$("#demo-remaining-bitcoins").text($scope.remainingBitcoins()+" bitcoins available"),$scope.disabled=!0,"medium"!=getWindowsSize()||$("#demo-transaction-details").isCompletelyScrolledIntoView()||moveTo("#demo-transaction-details"),setTimeout(function(){$("#demo-transaction-details").replaceWith($("#ok-purchase").fadeIn("slow")),$("#confirmation-sound")[0].play(),setTimeout(function(){$("#congratulations-demo-modal").foundation("reveal","open"),enable_bottom_sections_after_demo()},1800)},1e3),analytics.track("Click Send demo transaction successful")):analytics.track("Failed attempt to submit demo transaction",{valid_amount:$("#demo-input-amount").parsley().isValid(),amount_value:$("#demo-input-amount").val(),valid_address:$("#demo-pay-to-address-input").parsley().isValid(),address_value:$("#demo-pay-to-address-input").val()}))},$scope.remainingBitcoinsFormattedText=function(){var result=$scope.remainingBitcoins();return result!=$scope.total_bitcoins?result+" out of "+$scope.total_bitcoins+" bitcoins available":$scope.total_bitcoins+" bitcoins available"},$scope.remainingBitcoins=function(){var result=$scope.total_bitcoins,parsed=parseFloat($scope.input_amount);return parsed>0&&(result=$scope.total_bitcoins-parsed),result.toFixed(8).replace(/(\.[0-9]*?)0+$/,"$1").replace(/([0-9]*)\.$/,"$1")},$scope.copyAddress=function(){demo_copy_address_button_glowing=!1,$("#copy-demo-button").css("box-shadow","0px 0px 0px #FFF").removeClass("address-info-block-shop-higlighted").addClass("address-info-block-shop"),"medium"!=getWindowsSize()||$("#demo-pay-to-address-input").isBottomScrolledIntoView()||moveTo("#demo-pay-to-address-input"),$("#demo-pay-to-address-input").val($("#demo-pay-to-address").text()),$("#demo-transaction-form").parsley().validate(),analytics.track("Click Copy demo Bitcoin address")},$scope.showBlockchainSection=function(){$("#show-blockchain-section").replaceWith($("#demo-section-blockchain").fadeIn("slow")),analytics.track("Click Show Blockchain extra information")},$scope.discardDemoModal=function(){$("#congratulations-demo-modal").foundation("reveal","close"),moveTo("#show-blockchain-section"),analytics.track("Click Show more information from demo Send successful modal")},$scope.disableAddressGlowing=function(){$("#demo-pay-to-address-input").parsley().isValid()?(demo_input_address_glowing=!1,$("#demo-pay-to-address-input").css("box-shadow","0px 0px 0px #FFF")):(demo_copy_address_button_glowing=!0,$("#copy-demo-button").removeClass("address-info-block-shop").addClass("address-info-block-shop-higlighted"))},$scope.disableAmountGlowing=function(){$("#demo-input-amount").parsley().isValid()&&(demo_input_amount_glowing=!1,$("#demo-input-amount").css("box-shadow","0px 0px 0px #FFF"))}}]);var autoscrolled=!1,player,tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var demo_input_amount_glowing=!1,demo_input_amount_glowing_on=!1,demo_input_address_glowing=!1,demo_input_address_glowing_on=!1,demo_copy_address_button_glowing=!1,demo_copy_address_button_glowing_on=!1,show_bottom_elements=!1;$.fn.isBottomScrolledIntoView=function(){var items=getScrolledItems(this),docViewTop=items[0],docViewBottom=items[1],elemBottom=(items[2],items[3]);return elemBottom>=docViewTop&&docViewBottom>=elemBottom},$.fn.isScrolledIntoView=function(){var items=getScrolledItems(this),docViewTop=items[0],docViewBottom=items[1],elemTop=items[2],elemBottom=items[3];return docViewBottom>=elemBottom&&elemTop>=docViewTop||elemTop>=docViewTop&&docViewBottom>=elemTop||elemBottom>=docViewTop&&docViewBottom>=elemBottom||docViewTop>=elemTop&&elemBottom>=docViewBottom},$.fn.isCompletelyScrolledIntoView=function(){var items=getScrolledItems(this),docViewTop=items[0],docViewBottom=items[1],elemTop=items[2],elemBottom=items[3];return docViewBottom>=elemBottom&&elemTop>=docViewTop};var scrollFadingBlocked=!1,scrollFadingChecker=null,windowResize={height:0,width:0,update:function(){this.width=$(window).width(),this.height=$(window).height()},checkResize:function(callback){(this.width!=$(window).width()||this.height!=$(window).height())&&(this.update(),callback.apply())}};windowResize.update(),$(document).on("open","#WIP-modal",function(){loadLocalBitcoinSellers(),analytics.track("Click Get first bitcoins")}),$(document).on("opened","#mining-info-modal",function(){analytics.track("Click Show Mining information")}),$(document).on("opened","#mining-POW-modal",function(){analytics.track("Click Mining POW")}),window.ParsleyConfig=window.ParsleyConfig||{},function($){window.ParsleyConfig=$.extend(!0,{},window.ParsleyConfig,{validators:{equal:{fn:function(value,elem){return value==elem}}},i18n:{en:{equal:"Use the Bitcoin address the shop provided"},es:{equal:"Usa la direcci\xf3n de Bitcoin que la tienda proporciona"}}})}(window.jQuery),!function($){var ParsleyUtils={attr:function($element,namespace,checkAttr){var attribute,obj={},regex=new RegExp("^"+namespace,"i");if("undefined"==typeof $element||"undefined"==typeof $element[0])return{};for(var i in $element[0].attributes)if(attribute=$element[0].attributes[i],"undefined"!=typeof attribute&&null!==attribute&&attribute.specified&&regex.test(attribute.name)){if("undefined"!=typeof checkAttr&&new RegExp(checkAttr+"$","i").test(attribute.name))return!0;obj[this.camelize(attribute.name.replace(namespace,""))]=this.deserializeValue(attribute.value)}return"undefined"==typeof checkAttr?obj:!1},setAttr:function($element,namespace,attr,value){$element[0].setAttribute(this.dasherize(namespace+attr),String(value))},get:function(obj,path){for(var i=0,paths=(path||"").split(".");this.isObject(obj)||this.isArray(obj);)if(obj=obj[paths[i++]],i===paths.length)return obj;return void 0},hash:function(length){return String(Math.random()).substring(2,length?length+2:9)},isArray:function(mixed){return"[object Array]"===Object.prototype.toString.call(mixed)},isObject:function(mixed){return mixed===Object(mixed)},deserializeValue:function(value){var num;try{return value?"true"==value||("false"==value?!1:"null"==value?null:isNaN(num=Number(value))?/^[\[\{]/.test(value)?$.parseJSON(value):value:num):value}catch(e){return value}},camelize:function(str){return str.replace(/-+(.)?/g,function(match,chr){return chr?chr.toUpperCase():""})},dasherize:function(str){return str.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}},ParsleyDefaults={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset]",priorityEnabled:!0,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"},ParsleyAbstract=function(){};ParsleyAbstract.prototype={asyncSupport:!1,actualizeOptions:function(){return this.options=this.parsleyInstance.OptionsFactory.get(this),this},validateThroughValidator:function(value,constraints,priority){return window.ParsleyValidator.validate.apply(window.ParsleyValidator,[value,constraints,priority])},subscribe:function(name,fn){return $.listenTo(this,name.toLowerCase(),fn),this},unsubscribe:function(name){return $.unsubscribeTo(this,name.toLowerCase()),this},reset:function(){if("ParsleyForm"!==this.__class__)return $.emit("parsley:field:reset",this);for(var i=0;i<this.fields.length;i++)$.emit("parsley:field:reset",this.fields[i]);$.emit("parsley:form:reset",this)},destroy:function(){if("ParsleyForm"!==this.__class__)return $.emit("parsley:field:destroy",this),void this.$element.removeData("Parsley");for(var i=0;i<this.fields.length;i++)this.fields[i].destroy();$.emit("parsley:form:destroy",this),this.$element.removeData("Parsley")}},function(exports){var Validator=function(options){return this.__class__="Validator",this.__version__="0.5.5",this.options=options||{},this.bindingKey=this.options.bindingKey||"_validatorjsConstraint",this};Validator.prototype={constructor:Validator,validate:function(objectOrString,AssertsOrConstraintOrGroup,group){if("string"!=typeof objectOrString&&"object"!=typeof objectOrString)throw new Error("You must validate an object or a string");return"string"==typeof objectOrString||_isArray(objectOrString)?this._validateString(objectOrString,AssertsOrConstraintOrGroup,group):this.isBinded(objectOrString)?this._validateBindedObject(objectOrString,AssertsOrConstraintOrGroup):this._validateObject(objectOrString,AssertsOrConstraintOrGroup,group)},bind:function(object,constraint){if("object"!=typeof object)throw new Error("Must bind a Constraint to an object");return object[this.bindingKey]=new Constraint(constraint),this},unbind:function(object){return"undefined"==typeof object._validatorjsConstraint?this:(delete object[this.bindingKey],this)},isBinded:function(object){return"undefined"!=typeof object[this.bindingKey]},getBinded:function(object){return this.isBinded(object)?object[this.bindingKey]:null},_validateString:function(string,assert,group){var result,failures=[];_isArray(assert)||(assert=[assert]);for(var i=0;i<assert.length;i++){if(!(assert[i]instanceof Assert))throw new Error("You must give an Assert or an Asserts array to validate a string");result=assert[i].check(string,group),result instanceof Violation&&failures.push(result)}return failures.length?failures:!0},_validateObject:function(object,constraint,group){if("object"!=typeof constraint)throw new Error("You must give a constraint to validate an object");return constraint instanceof Constraint?constraint.check(object,group):new Constraint(constraint).check(object,group)},_validateBindedObject:function(object,group){return object[this.bindingKey].check(object,group)}},Validator.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var Constraint=function(data,options){if(this.__class__="Constraint",this.options=options||{},this.nodes={},data)try{this._bootstrap(data)}catch(err){throw new Error("Should give a valid mapping object to Constraint",err,data)}return this};Constraint.prototype={constructor:Constraint,check:function(object,group){var result,failures={};for(var property in this.options.strict?this.nodes:object)if(this.options.strict?this.has(property,object):this.has(property))result=this._check(property,object[property],group),(_isArray(result)&&result.length>0||!_isArray(result)&&!_isEmptyObject(result))&&(failures[property]=result);else if(this.options.strict)try{(new Assert).HaveProperty(property).validate(object)}catch(violation){failures[property]=violation}return _isEmptyObject(failures)?!0:failures},add:function(node,object){if(object instanceof Assert||_isArray(object)&&object[0]instanceof Assert)return this.nodes[node]=object,this;if("object"==typeof object&&!_isArray(object))return this.nodes[node]=object instanceof Constraint?object:new Constraint(object),this;throw new Error("Should give an Assert, an Asserts array, a Constraint",object)},has:function(node,nodes){var nodes="undefined"!=typeof nodes?nodes:this.nodes;return"undefined"!=typeof nodes[node]},get:function(node,placeholder){return this.has(node)?this.nodes[node]:placeholder||null},remove:function(node){var _nodes=[];for(var i in this.nodes)i!==node&&(_nodes[i]=this.nodes[i]);return this.nodes=_nodes,this},_bootstrap:function(data){if(data instanceof Constraint)return this.nodes=data.nodes;for(var node in data)this.add(node,data[node])},_check:function(node,value,group){if(this.nodes[node]instanceof Assert)return this._checkAsserts(value,[this.nodes[node]],group);if(_isArray(this.nodes[node]))return this._checkAsserts(value,this.nodes[node],group);if(this.nodes[node]instanceof Constraint)return this.nodes[node].check(value,group);throw new Error("Invalid node",this.nodes[node])},_checkAsserts:function(value,asserts,group){for(var result,failures=[],i=0;i<asserts.length;i++)result=asserts[i].check(value,group),"undefined"!=typeof result&&!0!==result&&failures.push(result);return failures}};var Violation=function(assert,value,violation){if(this.__class__="Violation",!(assert instanceof Assert))throw new Error("Should give an assertion implementing the Assert interface");this.assert=assert,this.value=value,"undefined"!=typeof violation&&(this.violation=violation)};Violation.prototype={show:function(){var show={assert:this.assert.__class__,value:this.value};return this.violation&&(show.violation=this.violation),show},__toString:function(){if("undefined"!=typeof this.violation)var violation='", '+this.getViolation().constraint+" expected was "+this.getViolation().expected;return this.assert.__class__+' assert failed for "'+this.value+violation||""},getViolation:function(){var constraint,expected;for(constraint in this.violation)expected=this.violation[constraint];return{constraint:constraint,expected:expected}}};var Assert=function(group){return this.__class__="Assert",this.__parentClass__=this.__class__,this.groups=[],"undefined"!=typeof group&&this.addGroup(group),this};Assert.prototype={construct:Assert,check:function(value,group){if(!(group&&!this.hasGroup(group)||!group&&this.hasGroups()))try{return this.validate(value,group)}catch(violation){return violation}},hasGroup:function(group){return _isArray(group)?this.hasOneOf(group):"Any"===group?!0:this.hasGroups()?-1!==this.groups.indexOf(group):"Default"===group},hasOneOf:function(groups){for(var i=0;i<groups.length;i++)if(this.hasGroup(groups[i]))return!0;return!1},hasGroups:function(){return this.groups.length>0},addGroup:function(group){return _isArray(group)?this.addGroups(group):(this.hasGroup(group)||this.groups.push(group),this)},removeGroup:function(group){for(var _groups=[],i=0;i<this.groups.length;i++)group!==this.groups[i]&&_groups.push(this.groups[i]);return this.groups=_groups,this},addGroups:function(groups){for(var i=0;i<groups.length;i++)this.addGroup(groups[i]);return this},HaveProperty:function(node){return this.__class__="HaveProperty",this.node=node,this.validate=function(object){if("undefined"==typeof object[this.node])throw new Violation(this,object,{value:this.node});return!0},this},Blank:function(){return this.__class__="Blank",this.validate=function(value){if("string"!=typeof value)throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(""!==value.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new Violation(this,value);return!0},this},Callback:function(fn){if(this.__class__="Callback",this.arguments=Array.prototype.slice.call(arguments),1===this.arguments.length?this.arguments=[]:this.arguments.splice(0,1),"function"!=typeof fn)throw new Error("Callback must be instanciated with a function");return this.fn=fn,this.validate=function(value){var arguments=[value].concat(this.arguments),result=this.fn.apply(this,arguments);if(!0!==result)throw new Violation(this,value,{result:result});return!0},this},Choice:function(list){if(this.__class__="Choice",!_isArray(list)&&"function"!=typeof list)throw new Error("Choice must be instanciated with an array or a function");return this.list=list,this.validate=function(value){for(var list="function"==typeof this.list?this.list():this.list,i=0;i<list.length;i++)if(value===list[i])return!0;throw new Violation(this,value,{choices:list})},this},Collection:function(constraint){return this.__class__="Collection",this.constraint="undefined"!=typeof constraint?new Constraint(constraint):!1,this.validate=function(collection,group){var result,validator=new Validator,count=0,failures={},groups=this.groups.length?this.groups:group;if(!_isArray(collection))throw new Violation(this,array,{value:Validator.errorCode.must_be_an_array});for(var i=0;i<collection.length;i++)result=this.constraint?validator.validate(collection[i],this.constraint,groups):validator.validate(collection[i],groups),_isEmptyObject(result)||(failures[count]=result),count++;return _isEmptyObject(failures)?!0:failures},this},Count:function(count){return this.__class__="Count",this.count=count,this.validate=function(array){if(!_isArray(array))throw new Violation(this,array,{value:Validator.errorCode.must_be_an_array});var count="function"==typeof this.count?this.count(array):this.count;if(isNaN(Number(count)))throw new Error("Count must be a valid interger",count);if(count!==array.length)throw new Violation(this,array,{count:count});return!0},this},Email:function(){return this.__class__="Email",this.validate=function(value){var regExp=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!=typeof value)throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(!regExp.test(value))throw new Violation(this,value);return!0},this},Eql:function(eql){if(this.__class__="Eql","undefined"==typeof eql)throw new Error("Equal must be instanciated with an Array or an Object");return this.eql=eql,this.validate=function(value){var eql="function"==typeof this.eql?this.eql(value):this.eql;if(!expect.eql(eql,value))throw new Violation(this,value,{eql:eql});return!0},this},EqualTo:function(reference){if(this.__class__="EqualTo","undefined"==typeof reference)throw new Error("EqualTo must be instanciated with a value or a function");return this.reference=reference,this.validate=function(value){var reference="function"==typeof this.reference?this.reference(value):this.reference;if(reference!==value)throw new Violation(this,value,{value:reference});return!0},this},GreaterThan:function(threshold){if(this.__class__="GreaterThan","undefined"==typeof threshold)throw new Error("Should give a threshold value");return this.threshold=threshold,this.validate=function(value){if(""===value||isNaN(Number(value)))throw new Violation(this,value,{value:Validator.errorCode.must_be_a_number});if(this.threshold>=value)throw new Violation(this,value,{threshold:this.threshold});return!0},this},GreaterThanOrEqual:function(threshold){if(this.__class__="GreaterThanOrEqual","undefined"==typeof threshold)throw new Error("Should give a threshold value");return this.threshold=threshold,this.validate=function(value){if(""===value||isNaN(Number(value)))throw new Violation(this,value,{value:Validator.errorCode.must_be_a_number});if(this.threshold>value)throw new Violation(this,value,{threshold:this.threshold});return!0},this},InstanceOf:function(classRef){if(this.__class__="InstanceOf","undefined"==typeof classRef)throw new Error("InstanceOf must be instanciated with a value");return this.classRef=classRef,this.validate=function(value){if(!0!=value instanceof this.classRef)throw new Violation(this,value,{classRef:this.classRef});return!0},this},IPv4:function(){return this.__class__="IPv4",this.validate=function(value){var regExp=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;if("string"!=typeof value)throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(!regExp.test(value))throw new Violation(this,value);return!0},this},Length:function(boundaries){if(this.__class__="Length",!boundaries.min&&!boundaries.max)throw new Error("Lenth assert must be instanciated with a { min: x, max: y } object");return this.min=boundaries.min,this.max=boundaries.max,this.validate=function(value){if("string"!=typeof value&&!_isArray(value))throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string_or_array});
if("undefined"!=typeof this.min&&this.min===this.max&&value.length!==this.min)throw new Violation(this,value,{min:this.min,max:this.max});if("undefined"!=typeof this.max&&value.length>this.max)throw new Violation(this,value,{max:this.max});if("undefined"!=typeof this.min&&value.length<this.min)throw new Violation(this,value,{min:this.min});return!0},this},LessThan:function(threshold){if(this.__class__="LessThan","undefined"==typeof threshold)throw new Error("Should give a threshold value");return this.threshold=threshold,this.validate=function(value){if(""===value||isNaN(Number(value)))throw new Violation(this,value,{value:Validator.errorCode.must_be_a_number});if(this.threshold<=value)throw new Violation(this,value,{threshold:this.threshold});return!0},this},LessThanOrEqual:function(threshold){if(this.__class__="LessThanOrEqual","undefined"==typeof threshold)throw new Error("Should give a threshold value");return this.threshold=threshold,this.validate=function(value){if(""===value||isNaN(Number(value)))throw new Violation(this,value,{value:Validator.errorCode.must_be_a_number});if(this.threshold<value)throw new Violation(this,value,{threshold:this.threshold});return!0},this},Mac:function(){return this.__class__="Mac",this.validate=function(value){var regExp=/^(?:[0-9A-F]{2}:){5}[0-9A-F]{2}$/i;if("string"!=typeof value)throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(!regExp.test(value))throw new Violation(this,value);return!0},this},NotNull:function(){return this.__class__="NotNull",this.validate=function(value){if(null===value||"undefined"==typeof value)throw new Violation(this,value);return!0},this},NotBlank:function(){return this.__class__="NotBlank",this.validate=function(value){if("string"!=typeof value)throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(""===value.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new Violation(this,value);return!0},this},Null:function(){return this.__class__="Null",this.validate=function(value){if(null!==value)throw new Violation(this,value);return!0},this},Range:function(min,max){if(this.__class__="Range",!min||!max)throw new Error("Range assert expects min and max values");return this.min=min,this.max=max,this.validate=function(value){try{return"string"==typeof value&&isNaN(Number(value))||_isArray(value)?(new Assert).Length({min:this.min,max:this.max}).validate(value):(new Assert).GreaterThanOrEqual(this.min).validate(value)&&(new Assert).LessThanOrEqual(this.max).validate(value),!0}catch(violation){throw new Violation(this,value,violation.violation)}return!0},this},Regexp:function(regexp,flag){if(this.__class__="Regexp","undefined"==typeof regexp)throw new Error("You must give a regexp");return this.regexp=regexp,this.flag=flag||"",this.validate=function(value){if("string"!=typeof value)throw new Violation(this,value,{value:Validator.errorCode.must_be_a_string});if(!new RegExp(this.regexp).test(value,this.flag))throw new Violation(this,value,{regexp:this.regexp,flag:this.flag});return!0},this},Required:function(){return this.__class__="Required",this.validate=function(value){if("undefined"==typeof value)throw new Violation(this,value);if("string"==typeof value)try{(new Assert).NotNull().validate(value)&&(new Assert).NotBlank().validate(value)}catch(violation){throw new Violation(this,value)}return!0},this},Unique:function(object){return this.__class__="Unique","object"==typeof object&&(this.key=object.key),this.validate=function(array){var value,store=[];if(!_isArray(array))throw new Violation(this,array,{value:Validator.errorCode.must_be_an_array});for(var i=0;i<array.length;i++)if(value="object"==typeof array[i]?array[i][this.key]:array[i],"undefined"!=typeof value){if(-1!==store.indexOf(value))throw new Violation(this,array,{value:value});store.push(value)}return!0},this}},exports.Assert=Assert,exports.Validator=Validator,exports.Violation=Violation,exports.Constraint=Constraint,Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&1/0!=n&&n!=-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===searchElement)return k;return-1});var _isEmptyObject=function(obj){for(var property in obj)return!1;return!0},_isArray=function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},expect={eql:function(actual,expected){if(actual===expected)return!0;if("undefined"!=typeof Buffer&&Buffer.isBuffer(actual)&&Buffer.isBuffer(expected)){if(actual.length!==expected.length)return!1;for(var i=0;i<actual.length;i++)if(actual[i]!==expected[i])return!1;return!0}return actual instanceof Date&&expected instanceof Date?actual.getTime()===expected.getTime():"object"!=typeof actual&&"object"!=typeof expected?actual==expected:this.objEquiv(actual,expected)},isUndefinedOrNull:function(value){return null===value||"undefined"==typeof value},isArguments:function(object){return"[object Arguments]"==Object.prototype.toString.call(object)},keys:function(obj){if(Object.keys)return Object.keys(obj);var keys=[];for(var i in obj)Object.prototype.hasOwnProperty.call(obj,i)&&keys.push(i);return keys},objEquiv:function(a,b){if(this.isUndefinedOrNull(a)||this.isUndefinedOrNull(b))return!1;if(a.prototype!==b.prototype)return!1;if(this.isArguments(a))return this.isArguments(b)?eql(pSlice.call(a),pSlice.call(b)):!1;try{var key,i,ka=this.keys(a),kb=this.keys(b)}catch(e){return!1}if(ka.length!==kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(key=ka[i],!this.eql(a[key],b[key]))return!1;return!0}};"function"==typeof define&&define.amd&&define("validator",[],function(){return exports})}("undefined"==typeof exports?this["undefined"!=typeof validatorjs_ns?validatorjs_ns:"Validator"]={}:exports);var ParsleyValidator=function(validators,catalog){this.__class__="ParsleyValidator",this.Validator=Validator,this.locale="en",this.init(validators||{},catalog||{})};ParsleyValidator.prototype={init:function(validators,catalog){this.catalog=catalog;for(var name in validators)this.addValidator(name,validators[name].fn,validators[name].priority);$.emit("parsley:validator:init")},setLocale:function(locale){if("undefined"==typeof this.catalog[locale])throw new Error(locale+" is not available in the catalog");return this.locale=locale,this},addCatalog:function(locale,messages,set){return"object"==typeof messages&&(this.catalog[locale]=messages),!0===set?this.setLocale(locale):this},addMessage:function(locale,name,message){void 0===typeof this.catalog[locale]&&(this.catalog[locale]={}),this.catalog[locale][name]=message},validate:function(){return(new this.Validator.Validator).validate.apply(new Validator.Validator,arguments)},addValidator:function(name,fn,priority){return this.validators[name]=function(requirements){return $.extend((new Validator.Assert).Callback(fn,requirements),{priority:priority})},this},updateValidator:function(name,fn,priority){return addValidator(name,fn,priority)},removeValidator:function(name){return delete this.validators[name],this},getErrorMessage:function(constraint){var message;return message="type"===constraint.name?window.ParsleyConfig.i18n[this.locale][constraint.name][constraint.requirements]:this.formatMesssage(window.ParsleyConfig.i18n[this.locale][constraint.name],constraint.requirements),""!==message?message:window.ParsleyConfig.i18n[this.locale].defaultMessage},formatMesssage:function(string,parameters){if("object"==typeof parameters){for(var i in parameters)string=this.formatMesssage(string,parameters[i]);return string}return"string"==typeof string?string.replace(new RegExp("%s","i"),parameters):""},validators:{notblank:function(){return $.extend((new Validator.Assert).NotBlank(),{priority:2})},required:function(){return $.extend((new Validator.Assert).Required(),{priority:512})},type:function(type){var assert;switch(type){case"email":assert=(new Validator.Assert).Email();break;case"number":assert=(new Validator.Assert).Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":assert=(new Validator.Assert).Regexp("^-?\\d+$");break;case"digits":assert=(new Validator.Assert).Regexp("^\\d+$");break;case"alphanum":assert=(new Validator.Assert).Regexp("^\\w+$","i");break;case"url":assert=(new Validator.Assert).Regexp("(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)","i");break;default:throw new Error("validator type `"+type+"` is not supported")}return $.extend(assert,{priority:256})},pattern:function(regexp){var flags="";return/^\/.*\/(?:[gimy]*)$/.test(regexp)&&(flags=regexp.replace(/.*\/([gimy]*)$/,"$1"),regexp=regexp.replace(new RegExp("^/(.*?)/"+flags+"$"),"$1")),$.extend((new Validator.Assert).Regexp(regexp,flags),{priority:64})},minlength:function(value){return $.extend((new Validator.Assert).Length({min:value}),{priority:30,requirementsTransformer:function(){return"string"!=typeof value||isNaN(value)?value:parseInt(value,10)}})},maxlength:function(value){return $.extend((new Validator.Assert).Length({max:value}),{priority:30,requirementsTransformer:function(){return"string"!=typeof value||isNaN(value)?value:parseInt(value,10)}})},length:function(array){return $.extend((new Validator.Assert).Length({min:array[0],max:array[1]}),{priority:32})},mincheck:function(length){return this.minlength(length)},maxcheck:function(length){return this.maxlength(length)},check:function(array){return this.length(array)},min:function(value){return $.extend((new Validator.Assert).GreaterThanOrEqual(value),{priority:30,requirementsTransformer:function(){return"string"!=typeof value||isNaN(value)?value:parseInt(value,10)}})},max:function(value){return $.extend((new Validator.Assert).LessThanOrEqual(value),{priority:30,requirementsTransformer:function(){return"string"!=typeof value||isNaN(value)?value:parseInt(value,10)}})},range:function(array){return $.extend((new Validator.Assert).Range(array[0],array[1]),{priority:32,requirementsTransformer:function(){for(var i=0;i<array.length;i++)array[i]="string"!=typeof array[i]||isNaN(array[i])?array[i]:parseInt(array[i],10);return array}})},equalto:function(value){return $.extend((new Validator.Assert).EqualTo(value),{priority:256,requirementsTransformer:function(){return $(value).length?$(value).val():value}})}}};var ParsleyUI=function(){this.__class__="ParsleyUI"};ParsleyUI.prototype={listen:function(){return $.listen("parsley:form:init",this,this.setupForm),$.listen("parsley:field:init",this,this.setupField),$.listen("parsley:field:validated",this,this.reflow),$.listen("parsley:form:validated",this,this.focus),$.listen("parsley:field:reset",this,this.reset),$.listen("parsley:form:destroy",this,this.destroy),$.listen("parsley:field:destroy",this,this.destroy),this},reflow:function(fieldInstance){if("undefined"!=typeof fieldInstance._ui&&!1!==fieldInstance._ui.active){var diff=this._diff(fieldInstance.validationResult,fieldInstance._ui.lastValidationResult);fieldInstance._ui.lastValidationResult=fieldInstance.validationResult,fieldInstance._ui.validatedOnce=!0,this.manageStatusClass(fieldInstance),this.manageErrorsMessages(fieldInstance,diff),this.actualizeTriggers(fieldInstance),(diff.kept.length||diff.added.length)&&"undefined"==typeof fieldInstance._ui.failedOnce&&this.manageFailingFieldTrigger(fieldInstance)}},manageStatusClass:function(fieldInstance){!0===fieldInstance.validationResult?this._successClass(fieldInstance):fieldInstance.validationResult.length>0?this._errorClass(fieldInstance):this._resetClass(fieldInstance)},manageErrorsMessages:function(fieldInstance,diff){if("undefined"==typeof fieldInstance.options.errorsMessagesDisabled){if("undefined"!=typeof fieldInstance.options.errorMessage)return void(diff.added.length||diff.kept.length?(0===fieldInstance._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&fieldInstance._ui.$errorsWrapper.append($(fieldInstance.options.errorTemplate).addClass("parsley-custom-error-message")),fieldInstance._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(fieldInstance.options.errorMessage)):fieldInstance._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove());for(var i=0;i<diff.removed.length;i++)this.removeError(fieldInstance,diff.removed[i].assert.name,!0);for(i=0;i<diff.added.length;i++)this.addError(fieldInstance,diff.added[i].assert.name,void 0,diff.added[i].assert,!0);for(i=0;i<diff.kept.length;i++)this.updateError(fieldInstance,diff.kept[i].assert.name,void 0,diff.kept[i].assert,!0)}},addError:function(fieldInstance,name,message,assert,doNotUpdateClass){fieldInstance._ui.$errorsWrapper.addClass("filled").append($(fieldInstance.options.errorTemplate).addClass("parsley-"+name).html(message||this._getErrorMessage(fieldInstance,assert))),!0!==doNotUpdateClass&&this._errorClass(fieldInstance)},updateError:function(fieldInstance,name,message,assert,doNotUpdateClass){fieldInstance._ui.$errorsWrapper.addClass("filled").find(".parsley-"+name).html(message||this._getErrorMessage(fieldInstance,assert)),!0!==doNotUpdateClass&&this._errorClass(fieldInstance)},removeError:function(fieldInstance,name,doNotUpdateClass){fieldInstance._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+name).remove(),!0!==doNotUpdateClass&&this.manageStatusClass(fieldInstance)},focus:function(formInstance){if(!0===formInstance.validationResult||"none"===formInstance.options.focus)return formInstance._focusedField=null;formInstance._focusedField=null;for(var i=0;i<formInstance.fields.length;i++)if(!0!==formInstance.fields[i].validationResult&&formInstance.fields[i].validationResult.length>0&&"undefined"==typeof formInstance.fields[i].options.noFocus){if("first"===formInstance.options.focus)return formInstance._focusedField=formInstance.fields[i].$element,formInstance._focusedField.focus();formInstance._focusedField=formInstance.fields[i].$element}return null===formInstance._focusedField?null:formInstance._focusedField.focus()},_getErrorMessage:function(fieldInstance,constraint){var customConstraintErrorMessage=constraint.name+"Message";return"undefined"!=typeof fieldInstance.options[customConstraintErrorMessage]?fieldInstance.options[customConstraintErrorMessage]:window.ParsleyValidator.getErrorMessage(constraint)},_diff:function(newResult,oldResult,deep){for(var added=[],kept=[],i=0;i<newResult.length;i++){for(var found=!1,j=0;j<oldResult.length;j++)if(newResult[i].assert.name===oldResult[j].assert.name){found=!0;break}found?kept.push(newResult[i]):added.push(newResult[i])}return{kept:kept,added:added,removed:deep?[]:this._diff(oldResult,newResult,!0).added}},setupForm:function(formInstance){formInstance.$element.on("submit.Parsley",!1,$.proxy(formInstance.onSubmitValidate,formInstance)),!1!==formInstance.options.uiEnabled&&formInstance.$element.attr("novalidate","")},setupField:function(fieldInstance){var _ui={active:!1};!1!==fieldInstance.options.uiEnabled&&(_ui.active=!0,fieldInstance.$element.attr(fieldInstance.options.namespace+"id",fieldInstance.__id__),_ui.$errorClassHandler=this._manageClassHandler(fieldInstance),_ui.errorsWrapperId="parsley-id-"+("undefined"!=typeof fieldInstance.options.multiple?"multiple-"+fieldInstance.options.multiple:fieldInstance.__id__),_ui.$errorsWrapper=$(fieldInstance.options.errorsWrapper).attr("id",_ui.errorsWrapperId),_ui.lastValidationResult=[],_ui.validatedOnce=!1,_ui.validationInformationVisible=!1,fieldInstance._ui=_ui,this._insertErrorWrapper(fieldInstance),this.actualizeTriggers(fieldInstance))},_manageClassHandler:function(fieldInstance){if("string"==typeof fieldInstance.options.classHandler&&$(fieldInstance.options.classHandler).length)return $(fieldInstance.options.classHandler);var $handler=fieldInstance.options.classHandler(fieldInstance);return"undefined"!=typeof $handler&&$handler.length?$handler:"undefined"==typeof fieldInstance.options.multiple||fieldInstance.$element.is("select")?fieldInstance.$element:fieldInstance.$element.parent()},_insertErrorWrapper:function(fieldInstance){var $errorsContainer;if("string"==typeof fieldInstance.options.errorsContainer){if($(fieldInstance.options.errorsContainer+"").length)return $(fieldInstance.options.errorsContainer).append(fieldInstance._ui.$errorsWrapper);window.console&&window.console.warn&&window.console.warn("The errors container `"+fieldInstance.options.errorsContainer+"` does not exist in DOM")}return"function"==typeof fieldInstance.options.errorsContainer&&($errorsContainer=fieldInstance.options.errorsContainer(fieldInstance)),"undefined"!=typeof $errorsContainer&&$errorsContainer.length?$errorsContainer.append(fieldInstance._ui.$errorsWrapper):"undefined"==typeof fieldInstance.options.multiple?fieldInstance.$element.after(fieldInstance._ui.$errorsWrapper):fieldInstance.$element.parent().after(fieldInstance._ui.$errorsWrapper)},actualizeTriggers:function(fieldInstance){var that=this;if(fieldInstance.options.multiple?$("["+fieldInstance.options.namespace+'multiple="'+fieldInstance.options.multiple+'"]').each(function(){$(this).off(".Parsley")}):fieldInstance.$element.off(".Parsley"),!1!==fieldInstance.options.trigger){var triggers=fieldInstance.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,"");""!==triggers&&(fieldInstance.options.multiple?$("["+fieldInstance.options.namespace+'multiple="'+fieldInstance.options.multiple+'"]').each(function(){$(this).on(triggers.split(" ").join(".Parsley ")+".Parsley",!1,$.proxy("function"==typeof fieldInstance.eventValidate?fieldInstance.eventValidate:that.eventValidate,fieldInstance))}):fieldInstance.$element.on(triggers.split(" ").join(".Parsley ")+".Parsley",!1,$.proxy("function"==typeof fieldInstance.eventValidate?fieldInstance.eventValidate:this.eventValidate,fieldInstance)))}},eventValidate:function(event){new RegExp("key").test(event.type)&&!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold||(this._ui.validatedOnce=!0,this.validate())},manageFailingFieldTrigger:function(fieldInstance){return fieldInstance._ui.failedOnce=!0,fieldInstance.options.multiple&&$("["+fieldInstance.options.namespace+'multiple="'+fieldInstance.options.multiple+'"]').each(function(){return new RegExp("change","i").test($(this).parsley().options.trigger||"")?void 0:$(this).on("change.ParsleyFailedOnce",!1,$.proxy(fieldInstance.validate,fieldInstance))}),fieldInstance.$element.is("select")&&!new RegExp("change","i").test(fieldInstance.options.trigger||"")?fieldInstance.$element.on("change.ParsleyFailedOnce",!1,$.proxy(fieldInstance.validate,fieldInstance)):new RegExp("keyup","i").test(fieldInstance.options.trigger||"")?void 0:fieldInstance.$element.on("keyup.ParsleyFailedOnce",!1,$.proxy(fieldInstance.validate,fieldInstance))},reset:function(parsleyInstance){"undefined"!=typeof parsleyInstance._ui&&(parsleyInstance.$element.off(".Parsley"),parsleyInstance.$element.off(".ParsleyFailedOnce"),"ParsleyForm"!==parsleyInstance.__class__&&(parsleyInstance._ui.$errorsWrapper.children().each(function(){$(this).remove()}),this._resetClass(parsleyInstance),parsleyInstance._ui.validatedOnce=!1,parsleyInstance._ui.lastValidationResult=[],parsleyInstance._ui.validationInformationVisible=!1))},destroy:function(parsleyInstance){"undefined"!=typeof parsleyInstance._ui&&(this.reset(parsleyInstance),"ParsleyForm"!==parsleyInstance.__class__&&(parsleyInstance._ui.$errorsWrapper.remove(),delete parsleyInstance._ui))},_successClass:function(fieldInstance){fieldInstance._ui.validationInformationVisible=!0,fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.errorClass).addClass(fieldInstance.options.successClass)},_errorClass:function(fieldInstance){fieldInstance._ui.validationInformationVisible=!0,fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.successClass).addClass(fieldInstance.options.errorClass)},_resetClass:function(fieldInstance){fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.successClass).removeClass(fieldInstance.options.errorClass)}};var ParsleyOptionsFactory=function(defaultOptions,globalOptions,userOptions,namespace){this.__class__="OptionsFactory",this.__id__=ParsleyUtils.hash(4),this.formOptions=null,this.fieldOptions=null,this.staticOptions=$.extend(!0,{},defaultOptions,globalOptions,userOptions,{namespace:namespace})};ParsleyOptionsFactory.prototype={get:function(parsleyInstance){if("undefined"==typeof parsleyInstance.__class__)throw new Error("Parsley Instance expected");switch(parsleyInstance.__class__){case"Parsley":return this.staticOptions;case"ParsleyForm":return this.getFormOptions(parsleyInstance);case"ParsleyField":case"ParsleyFieldMultiple":return this.getFieldOptions(parsleyInstance);default:throw new Error("Instance "+parsleyInstance.__class__+" is not supported")}},getFormOptions:function(formInstance){return this.formOptions=ParsleyUtils.attr(formInstance.$element,this.staticOptions.namespace),$.extend({},this.staticOptions,this.formOptions)},getFieldOptions:function(fieldInstance){return this.fieldOptions=ParsleyUtils.attr(fieldInstance.$element,this.staticOptions.namespace),null===this.formOptions&&"ParsleyForm"===fieldInstance.parsleyInstance.__proxy__&&(this.formOptions=getFormOptions(fieldInstance.parsleyInstance)),$.extend({},this.staticOptions,this.formOptions,this.fieldOptions)}};var ParsleyForm=function(element,parsleyInstance){if(this.__class__="ParsleyForm",this.__id__=ParsleyUtils.hash(4),"Parsley"!==ParsleyUtils.get(parsleyInstance,"__class__"))throw new Error("You must give a Parsley instance");this.parsleyInstance=parsleyInstance,this.$element=$(element)};ParsleyForm.prototype={init:function(){return this.validationResult=null,this.options=this.parsleyInstance.OptionsFactory.get(this),this._bindFields(),this},onSubmitValidate:function(event){return this.validate(void 0,void 0,event),!1===this.validationResult&&event instanceof $.Event&&event.preventDefault(),this},validate:function(group,force,event){this.submitEvent=event,this.validationResult=!0;var fieldValidationResult=[];this._refreshFields(),$.emit("parsley:form:validate",this);for(var i=0;i<this.fields.length;i++)group&&group!==this.fields[i].options.group||(fieldValidationResult=this.fields[i].validate(force),!0!==fieldValidationResult&&fieldValidationResult.length>0&&this.validationResult&&(this.validationResult=!1));return $.emit("parsley:form:validated",this),this.validationResult},isValid:function(group,force){this._refreshFields();for(var i=0;i<this.fields.length;i++)if((!group||group===this.fields[i].options.group)&&!1===this.fields[i].isValid(force))return!1;return!0},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var self=this;return this.fields=[],this.fieldsMappedById={},this.$element.find(this.options.inputs).each(function(){var fieldInstance=new window.Parsley(this,{},self.parsleyInstance);"ParsleyField"!==fieldInstance.__class__&&"ParsleyFieldMultiple"!==fieldInstance.__class__||fieldInstance.$element.is(fieldInstance.options.excluded)||"undefined"==typeof self.fieldsMappedById[fieldInstance.__class__+"-"+fieldInstance.__id__]&&(self.fieldsMappedById[fieldInstance.__class__+"-"+fieldInstance.__id__]=fieldInstance,self.fields.push(fieldInstance))}),this}};var ConstraintFactory=function(parsleyField,name,requirements,priority,isDomConstraint){if(!new RegExp("ParsleyField").test(ParsleyUtils.get(parsleyField,"__class__")))throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");if("function"!=typeof window.ParsleyValidator.validators[name]&&"Assert"!==window.ParsleyValidator.validators[name](requirements).__parentClass__)throw new Error("Valid validator expected");var getPriority=function(parsleyField,name){return"undefined"!=typeof parsleyField.options[name+"Priority"]?parsleyField.options[name+"Priority"]:ParsleyUtils.get(window.ParsleyValidator.validators[name](requirements),"priority")||2};return priority=priority||getPriority(parsleyField,name),"function"==typeof window.ParsleyValidator.validators[name](requirements).requirementsTransformer&&(requirements=window.ParsleyValidator.validators[name](requirements).requirementsTransformer()),$.extend(window.ParsleyValidator.validators[name](requirements),{name:name,requirements:requirements,priority:priority,groups:[priority],isDomConstraint:isDomConstraint||ParsleyUtils.attr(parsleyField.$element,parsleyField.options.namespace,name)})},ParsleyField=function(field,parsleyInstance){if(this.__class__="ParsleyField",this.__id__=ParsleyUtils.hash(4),"Parsley"!==ParsleyUtils.get(parsleyInstance,"__class__"))throw new Error("You must give a Parsley instance");this.parsleyInstance=parsleyInstance,this.$element=$(field),this.options=this.parsleyInstance.OptionsFactory.get(this)};ParsleyField.prototype={init:function(){return this.constraints=[],this.validationResult=[],this.bindConstraints(),this},validate:function(force){return this.value=this.getValue(),$.emit("parsley:field:validate",this),$.emit("parsley:field:"+(this.isValid(force,this.value)?"success":"error"),this),$.emit("parsley:field:validated",this),this.validationResult},getConstraintsSortedPriorities:function(){for(var priorities=[],i=0;i<this.constraints.length;i++)-1===priorities.indexOf(this.constraints[i].priority)&&priorities.push(this.constraints[i].priority);return priorities.sort(function(a,b){return b-a}),priorities},isValid:function(force,value){this.refreshConstraints();var priorities=this.getConstraintsSortedPriorities();if(value=value||this.getValue(),0===value.length&&!this.isRequired()&&"undefined"==typeof this.options.validateIfEmpty&&"undefined"==typeof force)return this.validationResult=[];if(!1===this.options.priorityEnabled)return!0===(this.validationResult=this.validateThroughValidator(value,this.constraints,"Any"));for(var i=0;i<priorities.length;i++)if(!0!==(this.validationResult=this.validateThroughValidator(value,this.constraints,priorities[i])))return!1;return!0},isRequired:function(){var constraintIndex=this._constraintIndex("required");return!(-1===constraintIndex||-1!==constraintIndex&&!1===this.constraints[constraintIndex].requirements)},getValue:function(){var value;return value="undefined"!=typeof this.options.value?this.options.value:this.$element.val(),!0===this.options.trimValue?value.replace(/^\s+|\s+$/g,""):value},refreshConstraints:function(){return this.actualizeOptions().bindConstraints(),this},bindConstraints:function(){for(var constraints=[],i=0;i<this.constraints.length;i++)!1===this.constraints[i].isDomConstraint&&constraints.push(this.constraints[i]);this.constraints=constraints;for(var name in this.options)this.addConstraint(name,this.options[name]);return this.bindHtml5Constraints()},bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&this.addConstraint("required",!0,void 0,!0),"string"==typeof this.$element.attr("pattern")&&this.addConstraint("pattern",this.$element.attr("pattern"),void 0,!0),"undefined"!=typeof this.$element.attr("min")&&"undefined"!=typeof this.$element.attr("max")?this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],void 0,!0):"undefined"!=typeof this.$element.attr("min")?this.addConstraint("min",this.$element.attr("min"),void 0,!0):"undefined"!=typeof this.$element.attr("max")&&this.addConstraint("max",this.$element.attr("max"),void 0,!0);var type=this.$element.attr("type");return"undefined"==typeof type?this:"number"===type?this.addConstraint("type","integer",void 0,!0):new RegExp(type,"i").test("email url range")?this.addConstraint("type",type,void 0,!0):void 0},addConstraint:function(name,requirements,priority,isDomConstraint){if(name=name.toLowerCase(),"function"==typeof window.ParsleyValidator.validators[name]){var constraint=new ConstraintFactory(this,name,requirements,priority,isDomConstraint);-1!==this._constraintIndex(constraint.name)&&this.removeConstraint(constraint.name),this.constraints.push(constraint)}return this},removeConstraint:function(name){for(var i=0;i<this.constraints.length;i++)if(name===this.constraints[i].name){this.constraints.splice(i,1);break}return this},updateConstraint:function(name,parameters,priority){return this.removeConstraint(name).addConstraint(name,parameters,priority)},_constraintIndex:function(name){for(var i=0;i<this.constraints.length;i++)if(name===this.constraints[i].name)return i;return-1}};var ParsleyMultiple=function(){this.__class__="ParsleyFieldMultiple"};ParsleyMultiple.prototype={init:function(multiple){return this.$elements=[this.$element],this.options.multiple=multiple,this},addElement:function($element){return this.$elements.push($element),this},refreshConstraints:function(){if(this.constraints=[],this.$element.is("select"))return this.actualizeOptions().bindConstraints(),this;for(var i=0;i<this.$elements.length;i++)this.constraints=this.constraints.concat(this.$elements[i].data("ParsleyFieldMultiple").refreshConstraints().constraints);return this},getValue:function(){if("undefined"!=typeof this.options.value)return this.options.value;if(this.$element.is("input[type=radio]"))return $("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').val()||"";if(this.$element.is("input[type=checkbox]")){var values=[];return $("["+this.options.namespace+'multiple="'+this.options.multiple+'"]:checked').each(function(){values.push($(this).val())}),values.length?values:[]}return this.$element.is("select")?null===this.$element.val()?[]:this.$element.val():void 0}};var o=$({}),subscribed={};$.listen=function(name){if("undefined"==typeof subscribed[name]&&(subscribed[name]=[]),"function"==typeof arguments[1])return subscribed[name].push({fn:arguments[1]});if("object"==typeof arguments[1]&&"function"==typeof arguments[2])return subscribed[name].push({fn:arguments[2],ctxt:arguments[1]});throw new Error("Wrong parameters")},$.listenTo=function(instance,name,fn){if("undefined"==typeof subscribed[name]&&(subscribed[name]=[]),!(instance instanceof ParsleyField||instance instanceof ParsleyForm))throw new Error("Must give Parsley instance");if("string"!=typeof name||"function"!=typeof fn)throw new Error("Wrong parameters");subscribed[name].push({instance:instance,fn:fn})},$.unsubscribe=function(name,fn){if("undefined"!=typeof subscribed[name]){if("string"!=typeof name||"function"!=typeof fn)throw new Error("Wrong arguments");for(var i=0;i<subscribed[name].length;i++)if(subscribed[name][i].fn===fn)return subscribed[name].splice(i,1)}},$.unsubscribeTo=function(instance,name){if("undefined"!=typeof subscribed[name]){if(!(instance instanceof ParsleyField||instance instanceof ParsleyForm))throw new Error("Must give Parsley instance");for(var i=0;i<subscribed[name].length;i++)if("undefined"!=typeof subscribed[name][i].instance&&subscribed[name][i].instance.__id__===instance.__id__)return subscribed[name].splice(i,1)}},$.unsubscribeAll=function(name){"undefined"!=typeof subscribed[name]&&delete subscribed[name]},$.emit=function(name,instance){if("undefined"!=typeof subscribed[name])for(var i=0;i<subscribed[name].length;i++)if("undefined"!=typeof subscribed[name][i].instance){if(instance instanceof ParsleyField||instance instanceof ParsleyForm)if(subscribed[name][i].instance.__id__!==instance.__id__){if(subscribed[name][i].instance instanceof ParsleyForm&&instance instanceof ParsleyField)for(var j=0;j<subscribed[name][i].instance.fields.length;j++)if(subscribed[name][i].instance.fields[j].__id__===instance.__id__){subscribed[name][i].fn.apply(o,Array.prototype.slice.call(arguments,1));continue}}else subscribed[name][i].fn.apply(o,Array.prototype.slice.call(arguments,1))}else subscribed[name][i].fn.apply("undefined"!=typeof subscribed[name][i].ctxt?subscribed[name][i].ctxt:o,Array.prototype.slice.call(arguments,1))},$.subscribed=function(){return subscribed},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.en=$.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,!0);
var Parsley=function(element,options,parsleyInstance){if(this.__class__="Parsley",this.__version__="2.0.0-rc4",this.__id__=ParsleyUtils.hash(4),"undefined"==typeof element)throw new Error("You must give an element");return this.init($(element),options,parsleyInstance)};Parsley.prototype={init:function($element,options,parsleyInstance){if(!$element.length)throw new Error("You must bind Parsley on an existing element.");if(this.$element=$element,this.$element.data("Parsley")){var savedParsleyInstance=this.$element.data("Parsley");return"undefined"!=typeof parsleyInstance&&"ParsleyField"===savedParsleyInstance.parsleyInstance.__proxy__&&(savedParsleyInstance.parsleyInstance=parsleyInstance),savedParsleyInstance}return this.OptionsFactory=new ParsleyOptionsFactory(ParsleyDefaults,ParsleyUtils.get(window,"ParsleyConfig")||{},options,this.getNamespace(options)),this.options=this.OptionsFactory.get(this),this.$element.is("form")||ParsleyUtils.attr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm",parsleyInstance):this.$element.is(this.options.inputs)&&!this.$element.is(this.options.excluded)?this.isMultiple()?this.handleMultiple(parsleyInstance):this.bind("parsleyField",parsleyInstance):this},isMultiple:function(){return this.$element.is("input[type=radio], input[type=checkbox]")&&"undefined"==typeof this.options.multiple||this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple")},handleMultiple:function(parsleyInstance){var name,multiple,parsleyMultipleInstance,that=this;if(this.options=$.extend(this.options,ParsleyUtils.attr(this.$element,this.options.namespace)),this.options.multiple?multiple=this.options.multiple:"undefined"!=typeof this.$element.attr("name")&&this.$element.attr("name").length?multiple=name=this.$element.attr("name"):"undefined"!=typeof this.$element.attr("id")&&this.$element.attr("id").length&&(multiple=this.$element.attr("id")),this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple"))return this.bind("parsleyFieldMultiple",parsleyInstance,multiple||this.__id__);if("undefined"==typeof multiple)return window.console&&window.console.warn&&window.console.warn("To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;if(multiple=multiple.replace(/(:|\.|\[|\]|\$)/g,""),"undefined"!=typeof name&&$('input[name="'+name+'"]').each(function(){$(this).attr(that.options.namespace+"multiple",multiple)}),$("["+this.options.namespace+"multiple="+multiple+"]").length)for(var i=0;i<$("["+this.options.namespace+"multiple="+multiple+"]").length;i++)if("undefined"!=typeof $($("["+this.options.namespace+"multiple="+multiple+"]").get(i)).data("Parsley")){parsleyMultipleInstance=$($("["+this.options.namespace+"multiple="+multiple+"]").get(i)).data("Parsley"),this.$element.data("ParsleyFieldMultiple")||(parsleyMultipleInstance.addElement(this.$element),this.$element.attr(this.options.namespace+"id",parsleyMultipleInstance.__id__));break}return this.bind("parsleyField",parsleyInstance,multiple,!0),parsleyMultipleInstance||this.bind("parsleyFieldMultiple",parsleyInstance,multiple)},getNamespace:function(options){return"undefined"!=typeof this.$element.data("parsleyNamespace")?this.$element.data("parsleyNamespace"):"undefined"!=typeof ParsleyUtils.get(options,"namespace")?options.namespace:"undefined"!=typeof ParsleyUtils.get(window,"ParsleyConfig.namespace")?window.ParsleyConfig.namespace:ParsleyDefaults.namespace},bind:function(type,parentParsleyInstance,multiple,doNotStore){var parsleyInstance;switch(type){case"parsleyForm":parsleyInstance=$.extend(new ParsleyForm(this.$element,parentParsleyInstance||this),new ParsleyAbstract,window.ParsleyExtend).init();break;case"parsleyField":parsleyInstance=$.extend(new ParsleyField(this.$element,parentParsleyInstance||this),new ParsleyAbstract,window.ParsleyExtend).init();break;case"parsleyFieldMultiple":parsleyInstance=$.extend(new ParsleyField(this.$element,parentParsleyInstance||this).init(),new ParsleyAbstract,new ParsleyMultiple,window.ParsleyExtend).init(multiple);break;default:throw new Error(type+"is not a supported Parsley type")}return"undefined"!=typeof multiple&&ParsleyUtils.setAttr(this.$element,this.options.namespace,"multiple",multiple),"undefined"!=typeof doNotStore?(this.$element.data("ParsleyFieldMultiple",parsleyInstance),parsleyInstance):(new RegExp("ParsleyF","i").test(parsleyInstance.__class__)&&(this.$element.data("Parsley",parsleyInstance),this.__proxy__=parsleyInstance.__class__,$.emit("parsley:"+("parsleyForm"===type?"form":"field")+":init",parsleyInstance)),parsleyInstance)}},$.fn.parsley=$.fn.psly=function(options){if(this.length>1){var instances=[];return this.each(function(){instances.push($(this).parsley(options))}),instances}return $(this).length?new Parsley(this,options):void(window.console&&window.console.warn&&window.console.warn("You must bind Parsley on an existing element."))},window.ParsleyUI="function"==typeof ParsleyUtils.get(window,"ParsleyConfig.ParsleyUI")?(new window.ParsleyConfig.ParsleyUI).listen():(new ParsleyUI).listen(),"undefined"==typeof window.ParsleyExtend&&(window.ParsleyExtend={}),"undefined"==typeof window.ParsleyConfig&&(window.ParsleyConfig={}),window.Parsley=window.psly=Parsley,window.ParsleyUtils=ParsleyUtils,window.ParsleyValidator=new ParsleyValidator(window.ParsleyConfig.validators,window.ParsleyConfig.i18n),!1!==ParsleyUtils.get(window,"ParsleyConfig.autoBind")&&$(document).ready(function(){$("[data-parsley-validate]").length&&$("[data-parsley-validate]").parsley()})}(window.jQuery);var user_location=null;$(document).ready(function(){setupActiveJavaScript(),detectLocation(),scrollFading(),setupAutoScroll(),setupScrollHintAnimation(),setupScrollFadingAndResize(),updateSizes(),updateToolTips(),$(window).on({scroll:scrollFading,resize:function(){windowResize.checkResize(resizeWindow)}}),setTimeout(function(){loadDemoContent()},6e3),loadCoinAnimation()}),function(){}.call(this),function(){}.call(this);